/*!
 * Brav1Toolbox.js - common utility scripts and polyfills
 * http://marcolago.com/
 * MIT licensed
 *
 * Copyright (C) 2012-now Marco Lago, http://marcolago.com
 */
var Brav1Toolbox=function(){function a(){return window.getComputedStyle?window.getComputedStyle(document.body):document.documentElement.style}function b(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)}function c(a,b,c){a.removeEventListener?a.removeEventListener(b,c):a.detachEvent&&a.detachEvent("on"+b,c)}function d(a){return""!=e(a)}function e(b){for(var c=m||a(),d=0;d<l.length;d++){var e=l[d].replace(/-/g,""),f=b;if(e.length>0&&(f=f.charAt(0).toUpperCase()+f.substr(1)),f=e+f,f in c==1)return f}return""}function f(a){return!!a&&Object.prototype.toString.call(a).match(/(\w+)\]/)[1]}function g(a,b){if(a.classList)a.classList.add(b);else if(0==i(a,b)){var c=a.className;c.length>0&&(c+=" "),a.className=c+b}}function h(a,b){if(a.classList)a.classList.remove(b);else{var c=a.className;-1!=c.indexOf(b)&&(c=-1!=c.indexOf(" "+b)?c.replace(" "+b,""):-1!=c.indexOf(b+" ")?c.replace(b+" ",""):c.replace(b,"")),a.className=c}}function i(a,b){if(a){if(a.classList)return a.classList.contains(b);if(a.className)return-1!=a.className.indexOf(b)}return!1}function j(a,b){if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(a,!0,!0);for(var d in b)c[d]=b[d];document.dispatchEvent(c)}}function k(a,b){var c,d;return c=b.x-a.x,c*=c,d=b.y-a.y,d*=d,Math.abs(Math.sqrt(c+d))}var l=["","-webkit-","-moz-","-ms-","-o-"],m=a();return{addListener:b,removeListener:c,dispatchEvent:j,testCSS:d,getPrefixed:e,typeOf:f,addClass:g,removeClass:h,hasClass:i,distance:k}}();!function(a,b){function c(b,c,g,h){b[d](f+c,"wheel"==e?g:function(b){!b&&(b=a.event);var c={originalEvent:b,target:b.target||b.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==b.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){b.preventDefault?b.preventDefault():b.returnValue=!1}};return"mousewheel"==e?(c.deltaY=-1/40*b.wheelDelta,b.wheelDeltaX&&(c.deltaX=-1/40*b.wheelDeltaX)):c.deltaY=b.detail,g(c)},h||!1)}var d,e,f="";a.addEventListener?d="addEventListener":(d="attachEvent",f="on"),e="onwheel"in b.createElement("div")?"wheel":void 0!==b.onmousewheel?"mousewheel":"DOMMouseScroll",a.addWheelListener=function(a,b,d){c(a,e,b,d),"DOMMouseScroll"==e&&c(a,"MozMousePixelScroll",b,d)}}(window,document);/*!
 * Flowtime.js
 * http://marcolago.com/flowtime-js/
 * MIT licensed
 *
 * Copyright (C) 2012-now Marco Lago, http://marcolago.com
 */
var Flowtime=function(){function a(a){if(ob){if("A"===a.target.nodeName||"A"===a.target.parentNode.nodeName){var b=a.target.getAttribute("href")||a.target.parentNode.getAttribute("href");if("#"===b)return void a.preventDefault();if(b&&(a.target.blur(),"#"==b.substr(0,1))){a.preventDefault();var c=Db.setPage(b);s(c,!0,!0)}}if(Wa){for(var c=a.target;c&&!Brav1Toolbox.hasClass(c,Ca);)c=c.parentNode;Brav1Toolbox.hasClass(c,Ca)&&(a.preventDefault(),s(c,null,!0))}if(Brav1Toolbox.hasClass(a.target,La)){a.preventDefault();var d=Number(r(a.target.getAttribute("data-section"))),e=Number(r(a.target.getAttribute("data-page")));S(d,e)}}}function b(a){Ta=!1;var b;b=a.state?a.state.token.replace("#/",""):document.location.hash.replace("#/","");var c=Db.setPage(b);s(c,!1)}function c(a,b){if(Ta||b){var c=document.location.hash.replace("#/",""),d=Db.setPage(c);s(d,!1)}}function d(a){kb=a,kb?(Brav1Toolbox.addListener(Qa,"mousedown",e,!1),Brav1Toolbox.addListener(Qa,"mouseup",g,!1)):(Brav1Toolbox.removeListener(Qa,"mousedown",e),Brav1Toolbox.removeListener(Qa,"mouseup",g))}function e(a){Ib=0,Jb=0,a=h(a),Gb=a.clientX,Hb=a.clientY,Kb=1;var b=i();Eb=b.x,Fb=b.y,kb&&Brav1Toolbox.addListener(Qa,"mousemove",f,!1)}function f(a){a.preventDefault(),a=h(a),Ib=a.clientX-Gb,Jb=a.clientY-Hb}function g(a){if(nb&&(Math.abs(Ib)>=Mb||Math.abs(Jb)>=Mb))if(a=h(a),Kb=0,Lb=Math.abs(Ib)>=Math.abs(Jb)?"x":"y","x"==Lb&&Math.abs(Ib)>=Mb){if(Ib>0)return void(rb===!0?R():P(!1));if(0>Ib)return void(rb===!0?Q():O(!1))}else{if(Jb>0&&Math.abs(Jb)>=Mb)return void(rb===!0?P(!1):R());if(0>Jb)return void(rb===!0?O(!1):Q())}Brav1Toolbox.removeListener(Qa,"mousemove",f)}function h(a){return a.touches&&(a=a.touches[0]),a}function i(){var a=Qa.style[Brav1Toolbox.getPrefixed("transform")],b=a.indexOf("translateX(")+11,c=a.substring(b,a.indexOf(")",b));-1!=c.indexOf("%")?(c=c.replace("%",""),c=parseInt(c)/100*window.innerWidth):-1!=c.indexOf("px")&&(c=parseInt(c.replace("px","")));var d=a.indexOf("translateY(")+11,e=a.substring(d,a.indexOf(")",d));return-1!=e.indexOf("%")?(e=e.replace("%",""),e=parseInt(e)/100*window.innerHeight):-1!=e.indexOf("px")&&(e=parseInt(e.replace("px",""))),{x:c,y:e}}function j(a){a.preventDefault(),w()}function k(a){a.preventDefault(),pb===!1&&lb===!0&&l(a)}function l(a){pb=!0,setTimeout(function(){pb=!1},qb),0==a.deltaY?a.deltaX>0?rb===!0?Q():O(a.shiftKey):a.deltaX<0&&(rb===!0?R():P(a.shiftKey)):a.deltaY>0?rb===!0?O(a.shiftKey):Q():a.deltaY<0&&(rb===!0?P(a.shiftKey):R())}function m(a){if(a.length>0){var b=a.replace("#/","").split("/");if(b.length>0){var c=document.querySelector(Ba+"[data-id=__"+b[0]+"]")||document.querySelector(Ba+"[data-prog=__"+b[0]+"]");if(null!=c){var d=null;return b.length>1&&(d=c.querySelector(Da+"[data-id=__"+b[1]+"]")||c.querySelector(Da+"[data-prog=__"+b[1]+"]")),null==d&&(d=c.querySelector(Da)),d}}}}function n(a){Db.update(),a!==!1&&c(null,!0)}function o(a){var b=Xa,c=Db.getCurrentPage().getAttribute("data-title");if(null==c)for(var d=a.split("/"),e=0;e<d.length;e++)b+=" | "+d[e];else null!=Db.getCurrentSection().getAttribute("data-title")&&(b+=" | "+Db.getCurrentSection().getAttribute("data-title")),b+=" | "+c;document.title=b}function p(a){return null!=a.getAttribute("data-id")?a.getAttribute("data-id").replace(/__/,""):a.getAttribute("data-prog").replace(/__/,"")}function q(a){return"__"!=a.substr(0,2)?"__"+a:a}function r(a){return"__"==a.substr(0,2)?a.replace(/__/,""):a}function s(a,b,c){b=0==b?b:!0,a||(a=null!=Db.getCurrentPage()?Db.getCurrentPage():document.querySelector(Da),b=!0),u(a),v(a),Wa&&B(!1,!1);var d=Db.getHash(a);1==c&&Db.updateFragments();var e=Db.getPageIndex(a);if(Va.section!=e.section||Va.page!=e.page)if(null!=za&&0!=b&&-1==Db.getCurrentFragmentIndex()){var f={token:d},g="#/"+d;Ua=g,window.history.pushState(f,null,Ua)}else document.location.hash="/"+d;o(d),yb[e.section]=e.page,Va.section===e.section&&Va.page!==e.page&&(zb=e.page),t(),Va=e,Db.switchActivePage(a,!0),eb&&z()}function t(){var a=Db.getPageIndex(),b={section:Db.getCurrentSection(),page:Db.getCurrentPage(),sectionIndex:a.section,pageIndex:a.page,pastSectionIndex:Va.section,pastPageIndex:Va.page,prevSection:Db.hasPrevSection(),nextSection:Db.hasNextSection(),prevPage:Db.hasPrevPage(),nextPage:Db.hasNextPage(),fragment:Db.getCurrentFragment(),fragmentIndex:Db.getCurrentFragmentIndex(),isOverview:Wa,progress:Db.getProgress(),total:Db.getPagesTotalLength(),isLoopable:db,clickerMode:fb,isAutoplay:Nb};Brav1Toolbox.dispatchEvent(Pa,b),void 0!==sb&&sb(b)}function u(a){var b,c,d=Db.getPageIndex(a);if(ab===!0?(b=a.x,c=a.y):rb===!0?(c=d.section,b=d.page):(b=d.section,c=d.page),xb===!0){if(Brav1Toolbox.testCSS("transform")){var e=Db.getCurrentSection(),f=Qa,g=e;rb===!0&&(f=e,g=Qa),f.style[Brav1Toolbox.getPrefixed("transform")]=ab?"translateX("+-b+"px)":"translateX("+100*-b+"%)",g.style[Brav1Toolbox.getPrefixed("transform")]=ab?"translateY("+-c+"px)":"translateY("+100*-c+"%)"}}else Brav1Toolbox.testCSS("transform")?Qa.style[Brav1Toolbox.getPrefixed("transform")]=ab?"translateX("+-b+"px) translateY("+-c+"px)":"translateX("+100*-b+"%) translateY("+100*-c+"%)":ab?(Qa.style.top=-c+"px",Qa.style.left=-b+"px"):(Qa.style.top=100*-c+"%",Qa.style.left=100*-b+"%");w()}function v(a){if(jb)for(var b=Db.getPageIndex(a),c=Db.getParallaxElements(),d=0;d<c.length;d++){var e=c[d];if(void 0!=e)for(var f=0;f<e.length;f++){var g=e[f];if(void 0!=g)for(var h=0;h<g.length;h++){var i=g[h],j=0,k=0;b.section<d?j=i.pX:b.section>d&&(j=-i.pX),b.page<f?k=i.pY:b.page>f&&(k=-i.pY);var l="%";gb&&(l="px"),i.style[Brav1Toolbox.getPrefixed("transform")]=rb===!0?"translateX("+k+l+") translateY("+j+l+")":"translateX("+j+l+") translateY("+k+l+")"}}}}function w(){window.scrollTo(0,0)}function x(){var a=document.createDocumentFragment();Za=document.createElement("div"),Za.className=Ja+(rb===!0?" ft-cross":""),a.appendChild(Za);for(var b=0;b<Db.getSectionsLength();b++){var c=document.createElement("div");c.setAttribute("data-section","__"+b),c.className=Ka,Brav1Toolbox.addClass(c,"thumb-section-"+b);for(var d=Db.getPages(b),e=0;e<d.length;e++){var f=document.createElement("div");f.className=La,f.setAttribute("data-section","__"+b),f.setAttribute("data-page","__"+e),Brav1Toolbox.addClass(f,"thumb-page-"+e),c.appendChild(f)}Za.appendChild(c)}Sa.appendChild(Za)}function y(){null!=Za&&(Sa.removeChild(Za),Za=null)}function z(){if(null!=Za)for(var a=Za.querySelectorAll(Ma),b=0;b<a.length;b++){var c=a[b],d=Number(r(c.getAttribute("data-section"))),e=Number(r(c.getAttribute("data-page")));d==Db.getPageIndex().section&&e==Db.getPageIndex().page?Brav1Toolbox.addClass(a[b],"actual"):Brav1Toolbox.removeClass(a[b],"actual")}}function A(){return Za}function B(a,b){Wa?D(a,b):(ya=Db.getCurrentPage(),E())}function C(a,b,c){Wa!==a&&(Wa=!a,B(b,c))}function D(a,b){Wa=!1,Brav1Toolbox.removeClass(Sa,"ft-overview"),Db.hideFragments(),b=b===!1?!1:!0,1==b&&(1==a?s(ya):s())}function E(){Wa=!0,Brav1Toolbox.addClass(Sa,"ft-overview"),Db.showFragments(),0==bb?F(!0):G(!0),t()}function F(a){if(a){if(rb===!0)var b=100/Db.getSectionsLength(),c=100/Db.getPagesLength();else var c=100/Db.getSectionsLength(),b=100/Db.getPagesLength();var d=.9*Math.min(c,b),e=(100-Db.getSectionsLength()*d)/2,f=(100-Db.getPagesLength()*d)/2;Qa.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+f+"%) scale("+d/100+", "+d/100+")"}}function G(a){if(a){var b=Ya,c=Db.getPageIndex();if(rb===!0)var d=50-b*c.section-b/2,e=50-b*c.page-b/2;else var e=50-b*c.section-b/2,d=50-b*c.page-b/2;Qa.style[Brav1Toolbox.getPrefixed("transform")]="translate("+e+"%, "+d+"%) scale("+b/100+", "+b/100+")"}}function H(a){var b=a.target.tagName;"INPUT"!=b&&"TEXTAREA"!=b&&"SELECT"!=b&&a.keyCode>=37&&a.keyCode<=40&&a.preventDefault()}function I(a){if(mb){var b=a.target.tagName;if("INPUT"!==b&&"TEXTAREA"!==b&&"SELECT"!==b)switch(a.preventDefault(),a.keyCode){case 27:B(!0);break;case 33:fb?R(a.shiftKey):V();break;case 34:fb?Q(a.shiftKey):W();break;case 35:U();break;case 36:T();break;case 37:rb===!0?R(a.shiftKey):P(a.shiftKey);break;case 39:rb===!0?Q(a.shiftKey):O(a.shiftKey);break;case 38:rb===!0?P(a.shiftKey):R(a.shiftKey);break;case 40:rb===!0?O(a.shiftKey):Q(a.shiftKey);break;case 13:Wa&&S(Db.getCurrentHilited())}}}function J(a,b,c,d){Pb=isNaN(parseInt(b))?Pb:b,Qb=d===!0||!1,1==a&&c!==!1&&K()}function K(){Nb=!0,clearTimeout(Ob),Rb=Date.now(),Ob=setTimeout(function(){Q(Qb),K()},Pb-Sb),Sb=0}function L(){Nb=!1,Sb=Date.now()-Rb,clearTimeout(Ob)}function M(){Nb=!1,clearTimeout(Ob),Rb=0,Sb=0}function N(){eb&&null==Za&&x(),document.location.hash.length>0?(Brav1Toolbox.addClass(Qa,"no-transition"),c(null,!0),Brav1Toolbox.removeClass(Qa,"no-transition")):N.arguments.length>0?S.apply(this,N.arguments):(S(0,0),z())}function O(a){var b=Db.getNextSection(a,$a);void 0!=b?s(b):Wa&&bb&&E()}function P(a){var b=Db.getPrevSection(a,$a);void 0!=b?s(b):Wa&&bb&&E()}function Q(a){var b=Db.getNextPage(a);void 0!=b?s(b):Wa&&bb&&E()}function R(a){var b=Db.getPrevPage(a);void 0!=b?s(b):Wa&&bb&&E()}function S(){var a=S.arguments;if(a.length>0){if(1==a.length)if("Object"===Brav1Toolbox.typeOf(a[0])){var b=a[0],c=b.section,d=b.page;if(null!=c&&void 0!=c){var e=document.querySelector(Ba+"[data-id="+q(c)+"]");if(null!=d&&void 0!=d){var f=e.querySelector(Da+"[data-id="+q(d)+"]");if(null!=f)return void s(f)}}}else void 0!=a[0].nodeName&&s(a[0],null,!0);if("Number"===Brav1Toolbox.typeOf(a[0])||0===a[0]){var f=Db.getPageByIndex(a[1],a[0]);return void s(f)}}}function T(){S(0,0)}function U(){var a=Db.getSectionsLength()-1;S(a,Db.getPages(a).length-1)}function V(){var a=Db.getPageIndex();S(a.section,0)}function W(){var a=Db.getPageIndex();S(a.section,Db.getPages(a.section).length-1)}function X(a,b,c){Brav1Toolbox.addListener(document,a,b,c)}function Y(a){$a=a===!0?!0:!1,Z(a)}function Z(a){_a=a===!0?!0:!1}function $(a){za=a===!0?!0:!1}function _(a){ab=a===!0?!0:!1,ab===!0&&Db.updateOffsets(),s()}function aa(a){ub=a===!0?!0:!1}function ba(a){tb=a===!0?!1:!0}function ca(a){bb=a===!0?!0:!1}function da(a){cb=a===!0?!0:!1}function ea(a){eb=a===!0?!0:!1,eb?(null==Za&&x(),z()):null!=Za&&y()}function fa(a,b){hb=a,ib=void 0==b?hb:b,Db.update()}function ga(a){gb=a===!0?!0:!1}function ha(){return Db.getPageIndex().section}function ia(){return Db.getPageIndex().page}function ja(a){db=a===!0?!0:!1}function ka(a){fb=a===!0?!0:!1}function la(a,b,c,d){ob=a===!1?!1:!0,mb=b===!1?!1:!0,lb=c===!1?!1:!0,nb=d===!1?!1:!0}function ma(a,b,c,d){ob=a===!1?!0:!1,mb=b===!1?!0:!1,lb=c===!1?!0:!1,nb=d===!1?!0:!1}function na(a){ob=a===!1?!1:!0}function oa(a){mb=a===!1?!1:!0}function pa(a){lb=a===!1?!1:!0}function qa(a){nb=a===!1?!1:!0}function ra(a){rb!==a&&(rb=a===!0?!0:!1,Brav1Toolbox.hasClass(Qa,Na)||rb!==!0?Brav1Toolbox.hasClass(Qa,Na)&&rb!==!0&&Brav1Toolbox.removeClass(Qa,Na):Brav1Toolbox.addClass(Qa,Na),Za&&(Brav1Toolbox.hasClass(Za,Na)||rb!==!0?Brav1Toolbox.hasClass(Za,Na)&&rb!==!0&&Brav1Toolbox.removeClass(Za,Na):Brav1Toolbox.addClass(Za,Na)),Db.updateOffsets(),s())}function sa(a){xb!==a&&(xb=a===!0?!0:!1,Brav1Toolbox.hasClass(Qa,Oa)||xb!==!0?Brav1Toolbox.hasClass(Qa,Oa)&&xb!==!0&&Brav1Toolbox.removeClass(Qa,Oa):Brav1Toolbox.addClass(Qa,Oa),Db.updateOffsets(),s())}function ta(a){qb=a}function ua(a){sb=a}function va(a){vb=a===!0?!0:!1}function wa(a){wb=a===!0?!0:!1}var xa=!1;("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&(xa=!0);var ya,za=window.history.pushState,Aa="ft-section",Ba="."+Aa,Ca="ft-page",Da="."+Ca,Ea="ft-fragment",Fa="."+Ea,Ga="revealed",Ha="actual",Ia="revealed-temp",Ja="ft-default-progress",Ka="ft-section-thumb",La="ft-page-thumb",Ma="."+La,Na="ft-cross",Oa="ft-scroll-the-section",Pa="flowtimenavigation",Qa=document.querySelector(".flowtime"),Ra=Qa.parentNode,Sa=(document.querySelector("html"),document.querySelector("body")),Ta=!1,Ua="",Va={section:0,page:0},Wa=!1,Xa=document.title,Ya=22,Za=null,$a=!1,_a=!0,ab=!1,bb=!1,cb=!1,db=!1,eb=!1,fb=!1,gb=!1,hb=50,ib=50,jb=null!=document.querySelector(".parallax"),kb=!1,lb=!0,mb=!0,nb=!0,ob=!0,pb=!1,qb=1e3,rb=Brav1Toolbox.hasClass(Qa,Na),sb=void 0,tb=!1,ub=!1,vb=!1,wb=!1,xb=Brav1Toolbox.hasClass(Qa,Oa),yb=[],zb=0,Ab=!0;try{var Bb=document.querySelector("html").className.toLowerCase();(-1!=Bb.indexOf("ie7")||-1!=Bb.indexOf("ie8")||-1!=Bb.indexOf("lt-ie9"))&&(Ab=!1)}catch(Cb){Ab=!1}Ab&&Brav1Toolbox.addClass(Ra,"ft-absolute-nav");var Db=function(){function a(){$=[],ea=[],aa=document.querySelectorAll(Fa),ba=[],Z=Qa.querySelectorAll(".flowtime > "+Ba),_=Qa.querySelectorAll(".flowtime "+Da);for(var a=0;a<Z.length;a++){var c=[],e=Z[a];ba[a]=[],da[a]=[],e.getAttribute("data-id")&&e.setAttribute("data-id","__"+r(e.getAttribute("data-id"))),e.setAttribute("data-prog","__"+(a+1)),e.index=a,e.setAttribute("id",""),pages=e.querySelectorAll(Da),ha+=pages.length,ga=Math.max(ga,pages.length);for(var f=0;f<pages.length;f++){var g=pages[f];if(g.getAttribute("data-id")&&g.setAttribute("data-id","__"+r(g.getAttribute("data-id"))),g.setAttribute("data-prog","__"+(f+1)),g.index=f,g.setAttribute("id",""),!g.getAttribute("data-title")){var h=g.querySelector("h1");null!=h&&""!=h.textContent.lenght&&g.setAttribute("data-title",h.textContent)}b(g,a,f),c.push(g);var i=g.querySelectorAll(Fa);ba[a][f]=i,da[a][f]=-1}$.push(c)}fa=Z.length,w(),d()}function b(a,b,c){if(jb){void 0==ea[b]&&(ea[b]=[]),void 0==ea[b][c]&&(ea[b][c]=[]);var d=a.querySelectorAll(".parallax");if(d.length>0)for(var e=0;e<d.length;e++){var f=d[e],g=hb,h=ib;if(null!=f.getAttribute("data-parallax")){var i=f.getAttribute("data-parallax").split(",");g=h=i[0],i.length>1&&(h=i[1])}f.pX=g,f.pY=h,ea[b][c].push(f)}}}function c(){return ea}function d(){for(var a=0;a<_.length;a++){var b=_[a];b.x=b.offsetLeft+b.parentNode.offsetLeft,b.y=b.offsetTop+b.parentNode.offsetTop}}function e(a,b){var c=ja,d=Wa===!0?!1:a===!tb;if(!(b===!0&&ba[ia][ja].length>0&&da[ia][ja]<ba[ia][ja].length-1&&d!==!0&&io===!1)){c=0,d===!0&&ia+1<=$.length-1?c=0:(d!==!0||_a===!0||ia+1>$.length-1)&&(c=ja);var e=Math.min(ia+1,$.length-1);return ia=1==db&&e===ia?0:e,Wa||(vb===!0&&void 0!==yb[ia]&&(c=yb[ia]),wb===!0&&(c=zb)),g($[ia],c)}return k(ia,ja),j($[ia][ja])}function f(a,b){var c=ja,d=Wa===!0?!1:a===!tb;if(!(b===!0&&ba[ia][ja].length>0&&da[ia][ja]>=0&&d!==!0&&Wa===!1)){var c=0;c=0,d===!0&&ia-1>=0?c=0:(d!==!0||_a===!0||0>ia-1)&&(c=ja);var e=Math.max(ia-1,0);return ia=db===!0&&e===ia?$.length-1:e,Wa||(vb===!0&&yb[ia]>=0&&(c=yb[ia]),wb===!0&&(c=zb)),g($[ia],c)}return l(ia,ja),j($[ia][ja])}function g(a,b){var c=a[b];if(void 0===c)if(ub===!0)c=a[0],b=0;else for(var d=b;d>=0;d--)if(void 0!==a[d]){c=a[d],b=d;break}return ja=b,Wa||q(),j(c)}function h(a){return ba[ia][ja].length>0&&da[ia][ja]<ba[ia][ja].length-1&&a!==!0&&Wa===!1?k(ia,ja):void 0===$[ia][ja+1]?void 0!==$[ia+1]?(ia+=1,ja=0):void 0===$[ia+1]&&db===!0&&(ia=0,ja=0):ja=Math.min(ja+1,$[ia].length-1),j($[ia][ja])}function i(a){return ba[ia][ja].length>0&&da[ia][ja]>=0&&1!=a&&0==Wa?l(ia,ja):0==ja?void 0!=$[ia-1]?(ia-=1,ja=$[ia].length-1):void 0==$[ia-1]&&1==db&&(ia=$.length-1,ja=$[ia].length-1):ja=Math.max(ja-1,0),j($[ia][ja])}function j(a){return 1==Wa?void W(a):a}function k(a,b,c){void 0!=c?da[a][b]=c:c=da[a][b]+=1;for(var d=0;c>=d;d++)Brav1Toolbox.addClass(ba[a][b][d],Ga),Brav1Toolbox.removeClass(ba[a][b][d],Ha);Brav1Toolbox.addClass(ba[a][b][c],Ha)}function l(a,b,c){void 0!=c?da[a][b]=c:c=da[a][b];for(var d=0;d<ba[a][b].length;d++)d>=c&&(Brav1Toolbox.removeClass(ba[a][b][d],Ga),Brav1Toolbox.removeClass(ba[a][b][d],Ia)),Brav1Toolbox.removeClass(ba[a][b][d],Ha);c-=1,c>=0&&Brav1Toolbox.addClass(ba[a][b][c],Ha),da[a][b]=c}function n(){for(var a=0;a<aa.length;a++)Brav1Toolbox.addClass(aa[a],Ia)}function o(){for(var a=0;a<aa.length;a++)Brav1Toolbox.removeClass(aa[a],Ia)}function q(){for(var a=0;a<ba.length;a++)for(var b=ba[a],c=0;c<b.length;c++){var d=b[c];if(d.length>0)if(a>ia)for(var e=d.length-1;e>=0;e--)l(a,c,e);else if(ia>a)for(var e=0;e<d.length;e++)k(a,c,e);else if(a==ia)if(c>ja)for(var e=d.length-1;e>=0;e--)l(a,c,e);else if(ja>c)for(var e=0;e<d.length;e++)k(a,c,e);else if(c==ja){if(1==_a&&(Va.section>Db.getPageIndex().section||Va.page>Db.getPageIndex().page))for(var e=0;e<d.length;e++)k(a,c,e);else for(var e=d.length-1;e>=0;e--)l(a,c,e);da[a][c]=0==_a?-1:Va.section>Db.getPageIndex().section||Va.page>Db.getPageIndex().page?d.length-1:-1}}}function s(a){return ia}function t(a){return ja}function u(){return Z}function v(a){return $[a]}function x(){return _}function y(a){return $[a].length}function z(){return fa}function A(){return ga}function B(){return ha}function C(a){var b=ia,c=ja;return void 0!=a&&(b=a.parentNode.index,c=a.index),{section:b,page:c}}function D(a){return Z[a]}function E(a,b){return $[b][a]}function F(){return Z[ia]}function G(){return $[ia][ja]}function H(){var a=ia-1;if(0>a){if(db!==!0)return null;a=$.length-1}return a}function I(){var a=H();return null===a?null:Z[a]}function J(){var a=ja-1;if(0>a){if(0===ia&&db){var b=$.length-1;return $[b][$[b].length-1]}return ia>0?$[ia-1][$[ia-1].length-1]:null}return $[ia][a]}function K(){var a=ia+1;if(a>$.length-1){if(db!==!0)return null;a=0}return a}function L(){var a=K();return null===a?null:Z[a]}function M(){var a=ja+1;return a>$[ia].length-1?ia===$.length-1&&db?$[0][0]:ia<$.length-1?$[ia+1][0]:null:$[ia][a]}function N(){return ba[ia][ja][O()]}function O(){return da[ia][ja]}function P(){return ia<Z.length-1}function Q(){return ia>0}function R(){return ja<$[ia].length-1}function S(){return ja>0}function T(){if(0==ia&&0==ja)return 0;for(var a=0,b=0;ia>b;b++)a+=$[b].length;return a+=$[ia][ja].index+1}function U(a){void 0!=a&&(ja=C(a).page,ia=C(a).section);var b="",c=Z[ia];if(b+=p(c),$[ia].length>0){var d=$[ia][ja];b+="/"+p(d)}return b}function V(a){var b=m(a);if(b){for(var c=b.parentNode,d=0;d<$.length;d++){var e=$[d];if(Z[d]===c){ia=d;for(var f=0;f<e.length;f++)if(e[f]===b){ja=f;break}}}q()}return b}function W(a,b){for(var c=a.parentNode.index,d=0;d<$.length;d++)for(var e=$[d],f=0;f<e.length;f++){var g=e[f];Brav1Toolbox.removeClass(g,"past-section"),Brav1Toolbox.removeClass(g,"future-section"),Brav1Toolbox.removeClass(g,"past-page"),Brav1Toolbox.removeClass(g,"future-page"),g!==a&&(Brav1Toolbox.removeClass(g,"hilite"),0==Wa&&g!==G()&&Brav1Toolbox.removeClass(g,"actual"),c>d?Brav1Toolbox.addClass(g,"past-section"):d>c&&Brav1Toolbox.addClass(g,"future-section"),g.index<a.index?Brav1Toolbox.addClass(g,"past-page"):g.index>a.index&&Brav1Toolbox.addClass(g,"future-page"))}Brav1Toolbox.addClass(a,"hilite"),b&&Y(a),ca=a}function X(){return ca}function Y(a){Brav1Toolbox.addClass(a,"actual")}var Z,$,_,aa,ba,ca,da=[],ea=[],fa=0,ga=0,ha=0,ia=0,ja=0;return a(),{update:a,updateFragments:q,showFragments:n,hideFragments:o,getSection:s,getPage:t,getSections:u,getPages:v,getAllPages:x,getNextSection:e,getPrevSection:f,getNextPage:h,getPrevPage:i,getSectionLength:y,getSectionsLength:z,getPagesLength:A,getPagesTotalLength:B,getPageIndex:C,getSectionByIndex:D,getPageByIndex:E,getCurrentSection:F,getCurrentPage:G,getPrevSectionObject:I,getPrevPageObject:J,getNextSectionObject:L,getNextPageObject:M,getCurrentFragment:N,getCurrentFragmentIndex:O,getProgress:T,getHash:U,setPage:V,switchActivePage:W,getCurrentHilited:X,hasNextSection:P,hasPrevSection:Q,hasNextPage:R,hasPrevPage:S,updateOffsets:d,getParallaxElements:c}}();Ab&&(xa&&Brav1Toolbox.addListener(document,"touchend",function(b){a(b)},!1),Brav1Toolbox.addListener(document,"click",a,!1)),0==Ta&&window.history.pushState?window.onpopstate=b:Ta=!0,Brav1Toolbox.addListener(window,"hashchange",c);var Eb=Qa.offsetX,Fb=0,Gb=0,Hb=0,Ib=0,Jb=0,Kb=0,Lb="x",Mb=100;xa&&(Qa.addEventListener("touchstart",e,!1),Qa.addEventListener("touchmove",f,!1),Qa.addEventListener("touchend",g,!1)),Brav1Toolbox.addListener(window,"scroll",j),addWheelListener(Qa,k);var Za=(function(){function a(){b(),Wa||(d=setTimeout(c,300))}function b(){clearTimeout(d)}function c(){Db.updateOffsets(),s()}var d=0/0;return Brav1Toolbox.addListener(window,"resize",a),window.addEventListener("orientationchange",a,!1),{enable:a,disable:b}}(),null);Brav1Toolbox.addListener(window,"keydown",H),Brav1Toolbox.addListener(window,"keyup",I);var Nb=!1,Ob=0,Pb=1e4,Qb=!1,Rb=0,Sb=0;return{start:N,updateNavigation:n,nextSection:O,prevSection:P,next:Q,prev:R,nextFragment:Q,prevFragment:R,gotoPage:S,gotoHome:T,gotoTop:V,gotoBottom:W,gotoEnd:U,toggleOverview:B,showOverview:C,fragmentsOnSide:Y,fragmentsOnBack:Z,useHistory:$,slideInPx:_,useOverviewVariant:ca,twoStepsSlide:da,showProgress:ea,defaultParallaxValues:fa,parallaxInPx:ga,addEventListener:X,getDefaultProgress:A,getSection:Db.getCurrentSection,getPage:Db.getCurrentPage,getSectionIndex:ha,getPageIndex:ia,getPrevSection:Db.getPrevSectionObject,getNextSection:Db.getNextSectionObject,getPrevPage:Db.getPrevPageObject,getNextPage:Db.getNextPageObject,autoplay:J,play:K,pause:L,stop:M,loop:ja,clicker:ka,mouseDragEnabled:d,enableNavigation:la,disableNavigation:ma,setLinksNavigation:na,setKeyboardNavigation:oa,setScrollNavigation:pa,setTouchNavigation:qa,setCrossDirection:ra,setDebouncingDelay:ta,onNavigation:ua,gridNavigation:ba,nearestPageToTop:aa,rememberSectionsStatus:va,rememberSectionsLastPage:wa,scrollTheSection:sa}}();